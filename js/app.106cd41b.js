(function(){"use strict";var e={348:function(e,t,r){var i=r(242),s=r(396);const n={class:"container mx-auto flex flex-col items-center bg-gray-100 p-4"},a={class:"container"},o=(0,s.Uk)(" Фильтр: "),l=(0,s.Uk)(),c=(0,s._)("br",null,null,-1),d={key:0,class:"w-full border-t border-gray-600 my-4"},u={class:"mt-5 grid grid-cols-1 gap-5 sm:grid-cols-3"},h={key:1,class:"w-full border-t border-gray-600 my-4"};function p(e,t,r,p,g,f){const m=(0,s.up)("loading-cover"),k=(0,s.up)("add-ticker"),w=(0,s.up)("ticker-card"),y=(0,s.up)("graph-prices");return(0,s.wg)(),(0,s.iD)("div",n,[g.loadingPage?((0,s.wg)(),(0,s.j4)(m,{key:0})):(0,s.kq)("",!0),(0,s._)("div",a,[(0,s.Wm)(k,{onAddNewTicker:f.addNewTicker,onUserIsInputting:t[0]||(t[0]=()=>{g.isAlreadyAddedError=!1}),"is-already-added-error":g.isAlreadyAddedError},null,8,["onAddNewTicker","is-already-added-error"]),(0,s._)("div",null,[o,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>g.filter=e),onInput:t[2]||(t[2]=e=>g.page=1)},null,544),[[i.nr,g.filter]]),l,c,g.page>1?((0,s.wg)(),(0,s.iD)("button",{key:0,class:"my-4 inline-flex items-center py-2 px-4 mx-2 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-full text-white bg-gray-600 hover:bg-gray-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",onClick:t[3]||(t[3]=e=>g.page--)}," Назад ")):(0,s.kq)("",!0),f.hasNextPage?((0,s.wg)(),(0,s.iD)("button",{key:1,class:"my-4 inline-flex items-center py-2 px-4 mx-2 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-full text-white bg-gray-600 hover:bg-gray-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",onClick:t[4]||(t[4]=e=>g.page++)}," Вперед ")):(0,s.kq)("",!0)]),g.addedTickers.length?((0,s.wg)(),(0,s.iD)("hr",d)):(0,s.kq)("",!0),(0,s._)("dl",u,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(f.paginatedTickers,(e=>((0,s.wg)(),(0,s.j4)(w,{key:e.name,ticker:e,isSelected:e.name===g.selectedTicker,onDeleteTicker:f.deleteTicker,onSelectTicker:t[5]||(t[5]=e=>g.selectedTicker=e)},null,8,["ticker","isSelected","onDeleteTicker"])))),128))]),g.addedTickers.length?((0,s.wg)(),(0,s.iD)("hr",h)):(0,s.kq)("",!0),0!=f.tickerToDisplayInGraph.length?((0,s.wg)(),(0,s.j4)(y,{key:2,ticker:f.tickerToDisplayInGraph,onCloseGraph:t[6]||(t[6]=()=>g.selectedTicker="")},null,8,["ticker"])):(0,s.kq)("",!0)])])}const g="f803a0614d11ffe8421ae96983ad4b1efe8ba29264d09309df3a6d9334f6169c",f="https://min-api.cryptocompare.com/data/all/coinlist?summary=true";class m extends WebSocket{subscribe(e){this.readyState!==m.OPEN?this.addEventListener("open",(()=>{this.send(JSON.stringify({action:"SubAdd",subs:[`5~CCCAGG~${e}~USD`]}))})):this.send(JSON.stringify({action:"SubAdd",subs:[`5~CCCAGG~${e}~USD`]}))}unsubscribe(e){this.send(JSON.stringify({action:"SubRemove",subs:[`5~CCCAGG~${e}~USD`]}))}}const k=new m(`wss://streamer.cryptocompare.com/v2?api_key=${g}`);k.addEventListener("message",(e=>{const t=JSON.parse(e.data);if("5"===t.TYPE&&t.PRICE){const e=y.get(t.FROMSYMBOL)??[];e.forEach((e=>e(t.PRICE,t.FROMSYMBOL)))}}));const w=()=>fetch(f).then((e=>e.json())).then((e=>{const t=[];for(const r in e.Data)t.push(e.Data[r].Symbol);return t})).then((e=>(e.sort((function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())})),e))),y=new Map;window.tickers=y;const v=(e,t)=>{const r=y.get(e)||[];y.set(e,[...r,t]),k.subscribe(e)},x=e=>{y.delete(e),k.unsubscribe(e)},b="cryptonomicon-list-of-chosen-values",T=e=>{const t=[];e.forEach((e=>t.push({name:e.name,value:[]}))),localStorage.setItem(b,JSON.stringify(t))},A=()=>{const e=localStorage.getItem(b);if(e){const t=JSON.parse(e);return t}};var C=r(139);const O={class:"flex"},S={class:"max-w-xs"},D=(0,s._)("label",{for:"wallet",class:"block text-sm font-medium text-gray-700"},"Тикер",-1),_={class:"mt-1 relative rounded-md shadow-md"},E={class:"flex bg-white shadow-md p-1 rounded-md flex-wrap"},M=["onClick"],z={key:0,class:"text-sm text-red-600"};function G(e,t,r,n,a,o){const l=(0,s.up)("add-button");return(0,s.wg)(),(0,s.iD)("section",null,[(0,s._)("div",O,[(0,s._)("div",S,[D,(0,s._)("div",_,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.ticker=e),onKeydown:t[1]||(t[1]=(0,i.D2)(((...e)=>o.addNewTicker&&o.addNewTicker(...e)),["enter"])),type:"text",name:"wallet",id:"wallet",class:"block w-full pr-10 border-gray-300 text-gray-900 focus:outline-none focus:ring-gray-500 focus:border-gray-500 sm:text-sm rounded-md",placeholder:"Например DOGE"},null,544),[[i.nr,a.ticker]])]),(0,s._)("div",E,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.prompts,(e=>((0,s.wg)(),(0,s.iD)("span",{key:e,onClick:t=>(a.ticker=e,o.addNewTicker()),class:"inline-flex items-center px-2 m-1 rounded-md text-xs font-medium bg-gray-300 text-gray-800 cursor-pointer"},(0,C.zw)(e),9,M)))),128))]),r.isAlreadyAddedError?((0,s.wg)(),(0,s.iD)("div",z," Такой тикер уже добавлен ")):(0,s.kq)("",!0)])]),(0,s.Wm)(l,{onClick:o.addNewTicker},null,8,["onClick"])])}const I={type:"button",class:"my-4 inline-flex items-center py-2 px-4 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-full text-white bg-gray-600 hover:bg-gray-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"},V=(0,s._)("svg",{class:"-ml-0.5 mr-2 h-6 w-6",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24",fill:"#ffffff"},[(0,s._)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})],-1),j=(0,s.Uk)(" Добавить "),P=[V,j];function U(e,t){return(0,s.wg)(),(0,s.iD)("button",I,P)}var N=r(89);const L={},$=(0,N.Z)(L,[["render",U]]);var F=$,q={components:{AddButton:F},props:{isAlreadyAddedError:{type:Boolean,required:!1,default:!1}},data(){return{ticker:"",listOfAllValues:[]}},methods:{addNewTicker(){this.$emit("add-new-ticker",this.ticker),this.ticker=""},getClosestTickerFromList(e){e=e.toUpperCase();let t=0,r=this.listOfAllValues.length,i=Math.floor(t+(r-t)/2);while(r-t>1){const s=this.listOfAllValues[i].toUpperCase();e>s?t=i:r=i,i=Math.floor(t+(r-t)/2)}return i+1},async getAndSetValues(){this.listOfAllValues=await w()}},computed:{promptsIndex(){return this.getClosestTickerFromList(this.ticker)},prompts(){return this.ticker?[this.listOfAllValues[this.promptsIndex],this.listOfAllValues[this.promptsIndex+1],this.listOfAllValues[this.promptsIndex+2],this.listOfAllValues[this.promptsIndex+3]]:["BTC","DOGE","BCH","CHD"]}},watch:{ticker(e){""!==e&&this.$emit("user-is-inputting")}},created:function(){this.getAndSetValues()}};const B=(0,N.Z)(q,[["render",G]]);var H=B;const R={class:"fixed w-100 h-100 opacity-80 bg-purple-800 inset-0 z-50 flex items-center justify-center"},J=(0,s._)("svg",{class:"animate-spin -ml-1 mr-3 h-12 w-12 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[(0,s._)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),(0,s._)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),Y=[J];function Z(e,t){return(0,s.wg)(),(0,s.iD)("div",R,Y)}const K={},W=(0,N.Z)(K,[["render",Z]]);var Q=W;const X={key:0,class:"relative"},ee={class:"text-lg leading-6 font-medium text-gray-900 my-8"},te={class:"flex items-end border-gray-600 border-b border-l h-64",ref:"graph"},re=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:svgjs":"http://svgjs.com/svgjs",version:"1.1",width:"30",height:"30",x:"0",y:"0",viewBox:"0 0 511.76 511.76",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve"},[(0,s._)("g",null,[(0,s._)("path",{d:"M436.896,74.869c-99.84-99.819-262.208-99.819-362.048,0c-99.797,99.819-99.797,262.229,0,362.048    c49.92,49.899,115.477,74.837,181.035,74.837s131.093-24.939,181.013-74.837C536.715,337.099,536.715,174.688,436.896,74.869z     M361.461,331.317c8.341,8.341,8.341,21.824,0,30.165c-4.16,4.16-9.621,6.251-15.083,6.251c-5.461,0-10.923-2.091-15.083-6.251    l-75.413-75.435l-75.392,75.413c-4.181,4.16-9.643,6.251-15.083,6.251c-5.461,0-10.923-2.091-15.083-6.251    c-8.341-8.341-8.341-21.845,0-30.165l75.392-75.413l-75.413-75.413c-8.341-8.341-8.341-21.845,0-30.165    c8.32-8.341,21.824-8.341,30.165,0l75.413,75.413l75.413-75.413c8.341-8.341,21.824-8.341,30.165,0    c8.341,8.32,8.341,21.824,0,30.165l-75.413,75.413L361.461,331.317z",fill:"#718096","data-original":"#000000"})])],-1),ie=[re];function se(e,t,r,i,n,a){return r.ticker.name?((0,s.wg)(),(0,s.iD)("section",X,[(0,s._)("h3",ee,(0,C.zw)(this.ticker.name)+" - USD ",1),(0,s._)("div",te,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.normalizedGraph,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{key:t,style:(0,C.j5)({height:`${e.columnHeight}rem`}),class:"bg-purple-800 border w-10"},null,4)))),128))],512),(0,s._)("button",{onClick:t[0]||(t[0]=()=>this.$emit("closeGraph")),type:"button",class:"absolute top-0 right-0"},ie)])):(0,s.kq)("",!0)}var ne={data(){return{graphMaxAmount:1}},props:{ticker:{type:Object,default:()=>({})}},methods:{calculateMaxGraphElements(){this.$refs.graph?this.graphMaxAmount=this.$refs.graph.clientWidth/38:this.graphMaxAmount=1}},computed:{normalizedGraph(){if(!this.ticker)return[];if(0===this.ticker.value.length)return[];const e=Math.max(...this.ticker.value),t=Math.min(...this.ticker.value),r=this.ticker.value.slice(),i=e-t;for(let n=0;n<r.length;n++)e!==t?r[n]===e?r[n]=16:r[n]===t?r[n]=1:r[n]=Math.floor((r[n]-t)/i*15)+1:r[n]=8;const s=[];for(let n=0;n<r.length;n++)s.push({columnHeight:r[n],value:this.ticker.value[n]});return s.length>this.graphMaxAmount?s.slice(-this.graphMaxAmount):s}},created:function(){window.addEventListener("resize",this.calculateMaxGraphElements)},renderTracked:function(){this.calculateMaxGraphElements()},mounted(){this.calculateMaxGraphElements()}};const ae=(0,N.Z)(ne,[["render",se]]);var oe=ae;const le={class:"px-4 py-5 sm:p-6 text-center"},ce={class:"text-sm font-medium text-gray-500 truncate"},de={class:"mt-1 text-3xl font-semibold text-gray-900"},ue=(0,s._)("div",{class:"w-full border-t border-gray-200"},null,-1),he=(0,s._)("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"#718096","aria-hidden":"true"},[(0,s._)("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),pe=(0,s.Uk)("Удалить "),ge=[he,pe];function fe(e,t,r,n,a,o){return(0,s.wg)(),(0,s.iD)("div",{onClick:t[1]||(t[1]=()=>{this.$emit("selectTicker",this.ticker.name)}),class:(0,C.C_)([{["border-4"]:this.isSelected},"bg-white overflow-hidden shadow rounded-lg border-purple-800 border-solid cursor-pointer"])},[(0,s._)("div",le,[(0,s._)("dt",ce,(0,C.zw)(this.ticker.name)+" - USD ",1),(0,s._)("dd",de,(0,C.zw)(o.normalizePrice(r.ticker.value[r.ticker.value.length-1])||"-"),1)]),ue,(0,s._)("button",{onClick:t[0]||(t[0]=(0,i.iM)((e=>o.deleteTicker(this.ticker)),["stop"])),class:"flex items-center justify-center font-medium w-full bg-gray-100 px-4 py-4 sm:px-6 text-md text-gray-500 hover:text-gray-600 hover:bg-gray-200 hover:opacity-20 transition-all focus:outline-none"},ge)],2)}var me={props:{ticker:{type:Object,required:!0,default:()=>({name:"",value:[]})},isSelected:{type:Boolean,required:!0,default:!1}},methods:{normalizePrice(e){return e?e>1?e.toFixed(2):e.toPrecision(2):void 0},deleteTicker(e){this.$emit("delete-ticker",e)}}};const ke=(0,N.Z)(me,[["render",fe]]);var we=ke,ye={name:"app",components:{AddTicker:H,LoadingCover:Q,GraphPrices:oe,TickerCard:we},methods:{addNewTicker(e){if(this.isAlreadyAddedError=!1,""!==e){if(e=e.toUpperCase(),this.addedTickers.forEach((t=>{t.name===e&&(this.isAlreadyAddedError=!0)})),!1===this.isAlreadyAddedError){const t={name:e,value:[]};this.addedTickers=[...this.addedTickers,t],v(t.name,(e=>{this.updateValues(t.name,e)})),this.filter=""}e=""}},deleteTicker(e){x(e.name),this.addedTickers=this.addedTickers.filter((t=>t!==e)),e.name===this.selectedTicker&&(this.selectedTicker="")},updateValues(e,t){this.addedTickers.find((t=>t.name===e)).value.push(t),this.addedTickers.find((t=>t.name===e)).value.length>100&&this.addedTickers.find((t=>t.name===e)).value.shift()},getAndSubscribeToTickersFromLocalStorage(){const e=A();e&&(this.addedTickers=e,this.addedTickers.forEach((e=>{v(e.name,(t=>{this.updateValues(e.name,t)}))})))},setFilterAndPageFromURL(){const e=Object.fromEntries(new URL(window.location).searchParams.entries());this.filter=e.filter??"",this.page=e.page??1}},computed:{startIndex(){return 6*(this.page-1)},tickerToDisplayInGraph(){return 0===this.addedTickers.length||""===this.selectedTicker?[]:this.addedTickers.find((e=>e.name===this.selectedTicker))},endIndex(){return 6*this.page},filteredTickers(){return this.addedTickers.filter((e=>e.name.includes(this.filter.toUpperCase())))},paginatedTickers(){return this.filteredTickers.slice(this.startIndex,this.endIndex)},hasNextPage(){return this.endIndex<this.addedTickers.length},pageStateOptions(){return{filter:this.filter,page:this.page}}},data(){return{loadingPage:!0,isAlreadyAddedError:!1,selectedTicker:"",addedTickers:[],filter:"",page:1}},watch:{addedTickers(){T(this.addedTickers)},pageStateOptions(e){window.history.pushState(null,document.title,`${window.location.pathname}?filter=${e.filter}&page=${e.page}`)},paginatedTickers(){0===this.paginatedTickers.length&&this.page>1&&this.page--}},created:function(){setTimeout((()=>{this.loadingPage=!this.loadingPage}),400),this.setFilterAndPageFromURL(),this.getAndSubscribeToTickersFromLocalStorage()}};const ve=(0,N.Z)(ye,[["render",p]]);var xe=ve;(0,i.ri)(xe).mount("#app")}},t={};function r(i){var s=t[i];if(void 0!==s)return s.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,r),n.exports}r.m=e,function(){var e=[];r.O=function(t,i,s,n){if(!i){var a=1/0;for(d=0;d<e.length;d++){i=e[d][0],s=e[d][1],n=e[d][2];for(var o=!0,l=0;l<i.length;l++)(!1&n||a>=n)&&Object.keys(r.O).every((function(e){return r.O[e](i[l])}))?i.splice(l--,1):(o=!1,n<a&&(a=n));if(o){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[i,s,n]}}(),function(){r.d=function(e,t){for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,i){var s,n,a=i[0],o=i[1],l=i[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(s in o)r.o(o,s)&&(r.m[s]=o[s]);if(l)var d=l(r)}for(t&&t(i);c<a.length;c++)n=a[c],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(d)},i=self["webpackChunkcryptonimicon"]=self["webpackChunkcryptonimicon"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=r.O(void 0,[998],(function(){return r(348)}));i=r.O(i)})();
//# sourceMappingURL=app.106cd41b.js.map